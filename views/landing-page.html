              <div class="integration-info">
                <div class="integration-name">${int.name}</div>
                <div class="integration-status">${int.status === 'connected' ? 'Connected' : 'Not connected'}</div>
              </div>
              <button class="integration-toggle ${int.status}" onclick="this.classList.toggle('active')"></button>
            </div>
          `).join('');
        }
      } catch (error) {
        console.log('Integrations error:', error);
      }
    }

    async function updateProfile() {
      const token = localStorage.getItem('authToken');
      const name = document.getElementById('settingsName').value;
      const email = document.getElementById('settingsEmail').value;
      
      try {
        const response = await fetch(API_URL + '/api/user/profile', {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer ' + token },
          body: JSON.stringify({ name, email })
        });
        const data = await response.json();
        alert(data.message);
      } catch (error) {
        alert('Error updating profile');
      }
    }

    async function changePassword() {
      const token = localStorage.getItem('authToken');
      const current = document.getElementById('currentPassword').value;
      const newPass = document.getElementById('newPassword').value;
      
      try {
        const response = await fetch(API_URL + '/api/user/password', {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer ' + token },
          body: JSON.stringify({ currentPassword: current, newPassword: newPass })
        });
        const data = await response.json();
        alert(data.message);
      } catch (error) {
        alert('Error changing password');
      }
    }

    window.addEventListener('DOMContentLoaded', () => {
      const token = localStorage.getItem('authToken');
      const userName = localStorage.getItem('userName');
      const userEmail = localStorage.getItem('userEmail');
      
      if (token && userName) {
        fetch(API_URL + '/api/verify-token', {
          headers: { 'Authorization': 'Bearer ' + token }
        })
        .then(res => res.json())
        .then(data => {
          if (data.success) {
            document.getElementById('userAvatar').textContent = data.user.name.charAt(0).toUpperCase();
            document.getElementById('userName').textContent = data.user.name;
            document.getElementById('userEmail').textContent = data.user.email;
            document.getElementById('userName').textContent = data.user.name;
            document.getElementById('settingsName').value = data.user.name;
            document.getElementById('settingsEmail').value = data.user.email;
            document.getElementById('landingPage').classList.add('hidden');
            document.getElementById('dashboardPage').classList.add('active');
            loadDashboardData();
          } else {
            localStorage.removeItem('authToken');
            localStorage.removeItem('userName');
            localStorage.removeItem('userEmail');
          }
        })
        .catch(() => {
          localStorage.removeItem('authToken');
          localStorage.removeItem('userName');
          localStorage.removeItem('userEmail');
        });
      }
    });

    document.querySelectorAll('.faq-question').forEach(q => {
      q.addEventListener('click', () => {
        const item = q.parentElement;
        item.classList.toggle('active');
      });
    });

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function(e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth' });
        }
      });
    });
  </script>
</body>
</html>